{
  "name": "primordial",
  "version": "1.0.0",
  "description": "Algorithmic trading platform",
  "author": "jasonlscharf@gmail.com",
  "license": "UNLICENSED",
  "private": true,
  "scripts": {
    "wp:dev": "webpack -c ./dist/web/webpack.config.dev.js",
    "wp:prod": "webpack -c ./dist/web/webpack.config.production.js",
    "wp:serve": "webpack serve --open -c ./dist/web/webpack.config.dev.js",
    "build": "yarn dev:build && yarn wp:prod",
    "db:migrate": "knex --migrations-directory 'src/roles/common-backend/database/migrations/' migrate:make -x ts",
    "db:schema": "docker run --network host -v \"$PWD/db-schema:/output\" --rm andrewjones/schemaspy-postgres:latest -host localhost -port 5432 -u primo -p primo -db primo -s public",
    "dev:watch": "tsc -w -p src",
    "dev:compile": "tsc -p src",
    "dev:clean": "rm -rf dist",
    "dev:build": "yarn dev:clean && yarn codegen && yarn dev:compile && yarn wp:dev && yarn release:assets && yarn dc build",
    "dev:up": "yarn dc up -d",
    "dc": "DOCKER_BUILDKIT=0 COMPOSE_DOCKER_CLI_BUILD=1 docker-compose -p primo -f docker-compose.yml -f docker-compose.dev.yml",
    "dc:tests": "DOCKER_BUILDKIT=0 COMPOSE_DOCKER_CLI_BUILD=1 docker-compose -p primo_tests -f docker-compose.yml -f docker-compose.tests.yml",
    "dev:build-images": "yarn dc build",
    "release:assets": "mkdir -p ./dist && cp package.json ./dist/package.json && cp ./src/roles/tests/intern.json ./dist/intern.json",
    "release:compile": "ls -lah && yarn dev:clean && yarn codegen && tsc -p src && yarn wp:prod",
    "release:build": "yarn release:compile && yarn release:assets",
    "release:build-images": "DOCKER_BUILDKIT=1 COMPOSE_DOCKER_CLI_BUILD=1 docker-compose -p primo build",
    "tail": "yarn logs -f",
    "ex": "docker exec -it core_server_1 sh",
    "up": "yarn build && yarn dc up -d",
    "down": "yarn dc down",
    "up-kube": "yarn dev:build && yarn dev:build-images && yarn kube:apply && yarn kube:restart",
    "up:debug": "yarn up",
    "codegen": "yarn tsoa --basePath src/roles/api -c src/roles/api/tsoa.json spec-and-routes && swagger-typescript-api -p ./src/swagger.json -o ./src/roles/web/js -n client.ts",
    "kube": "kubectl -n default",
    "kube:apply": "yarn kube:config && yarn kube apply -f k8s/manifest.yml",
    "kube:config": "yarn -s kube kustomize k8s/overlays/dev > k8s/manifest.yml",
    "kube:config:release": "yarn -s kube kustomize k8s/overlays/production > k8s/manifest.yml",
    "kube:fwd:stop": "kill $(ps -ef | grep 'kubectl -n default [p]ort-forward' | awk '{print $2}') 2>/dev/null || true",
    "kube:fwd": "yarn kube:fwd:stop && yarn kube:fwd:start",
    "kube:restart": "yarn kube rollout restart deployment",
    "cli": "yarn -s dc run --rm -p \"9234:9229\" spooler node --inspect=\"0.0.0.0:9229\" /app/spooler/cli.js",
    "cli:debug": "yarn -s dc run --rm -p \"9234:9229\" spooler node --inspect-brk=\"0.0.0.0:9229\" /app/spooler/cli.js",
    "cli:debug:bot": "yarn -s cli:debug -- bot create --name foobaz --symbols ETH/BTC --genome \"RSIL=20\"",
    "primo": "docker exec -it primo_spooler_1 primo",
    "test": "docker-compose -p primo_tests -f docker-compose.yml -f docker-compose.tests.yml up --remove-orphans --abort-on-container-exit --exit-code-from tests --build tests",
    "test:ci": "docker-compose -p primo -f docker-compose.yml -f docker-compose.tests.yml up --remove-orphans --abort-on-container-exit --exit-code-from tests --build tests",
    "test:debug:start": "docker-compose -p primo_tests -f docker-compose.yml -f docker-compose.tests.yml up -d --build && docker logs -f primo_tests_debug_1",
    "test:debug:stop": "docker-compose -p primo_tests -f docker-compose.yml -f docker-compose.tests.yml down",
    "test:debug:logs": "yarn -s dc:tests logs -f tests_debugging",
    "test:reboot": "yarn test:debug:stop && docker volume rm primo_tests_db_tests && yarn test:debug:start && docker restart primo_tests_debug_1",
    "rabbit": "docker exec -it primo_mq_1 rabbitmqctl",
    "rabbit:list": "yarn -s rabbit list_queues name messages_ready messages_unacknowledged",
    "role:tests:run": "c8 -x **/tests/** -r cobertura node --nolazy /app/node_modules/.bin/intern config=/app/tests/intern.json target=dev",
    "role:api:dev": "nodemon --signal SIGTERM -V --config /app/src/roles/api/nodemon.json",
    "role:worker:dev": "nodemon --signal SIGTERM -V --config /app/src/roles/worker/nodemon.json",
    "role:spooler:dev": "nodemon --signal SIGTERM -V --config /app/src/roles/spooler/nodemon.json",
    "role:tests:dev": "nodemon --signal SIGTERM -V --config /app/src/roles/tests/nodemon.json",
    "role:tests:watch": "nodemon --signal SIGTERM -V --config /app/src/roles/tests/nodemon.watch.json",
    "version:apply": "sh version.sh"
  },
  "devDependencies": {
    "@koa/router": "^9.4.0",
    "@types/amqplib": "^0.8.2",
    "@types/applicationinsights": "^0.20.0",
    "@types/big.js": "^6.1.1",
    "@types/commander": "^2.12.2",
    "@types/extract-zip": "^1.6.2",
    "@types/js-yaml": "^4.0.3",
    "@types/json2csv": "^5.0.3",
    "@types/knex": "^0.16.1",
    "@types/koa": "^2.11.5",
    "@types/koa-bodyparser": "^4.3.0",
    "@types/koa-morgan": "^1.0.4",
    "@types/koa-router": "^7.4.1",
    "@types/koa__router": "^8.0.3",
    "@types/luxon": "^1.27.1",
    "@types/node": "^14.11.8",
    "@types/rascal": "^10.0.4",
    "@types/ws": "^7.4.7",
    "@webpack-cli/serve": "^1.5.1",
    "copy-webpack-plugin": "^9.0.1",
    "css-loader": "^6.2.0",
    "html-webpack-plugin": "^5.3.2",
    "intern": "^4.10.0",
    "nodemon": "^2.0.5",
    "style-loader": "^3.2.1",
    "swagger": "^0.7.5",
    "swagger-typescript-api": "^9.2.0",
    "ts-loader": "^9.2.4",
    "typescript": "^4.0.3",
    "webpack": "^5.47.0",
    "webpack-cli": "^4.3.0",
    "webpack-dev-server": "^3.11.2"
  },
  "dependencies": {
    "amqplib": "^0.8.0",
    "applicationinsights": "^1.8.7",
    "big.js": "^6.1.1",
    "binance-api-node": "^0.11.10",
    "c8": "^7.7.3",
    "ccxt": "^1.54.58",
    "commander": "^8.1.0",
    "extract-zip": "^2.0.1",
    "figlet": "^1.5.2",
    "js-yaml": "^4.1.0",
    "json2csv": "^5.0.6",
    "knex": "^0.95.8",
    "koa": "^2.13.0",
    "koa-bodyparser": "^4.3.0",
    "koa-json": "^2.0.2",
    "koa-router": "^9.4.0",
    "luxon": "^2.0.1",
    "morgan": "^1.10.0",
    "pg": "^8.7.1",
    "react": "^17.0.2",
    "react-dom": "^17.0.2",
    "react-router-dom": "^5.3.0",
    "talib": "^1.1.4",
    "tedis": "^0.1.12",
    "tslib": "^2.3.0",
    "tsoa": "^3.3.0",
    "typescript-ioc": "^3.2.2",
    "ws": "^7.5.3"
  }
}
